## Hydration Mitosis

This is an experiment that uses the
[Mitosis](https://github.com/BuilderIO/mitosis) compiler to create blocks using
the Mitosis syntax and compile them to both React (for frontend) and a Liquid
template to be rendered on the server in PHP.

This approach tackles both the problem of duplication of logic between the PHP
and JS parts of the block, as well as hydration of blocks, as the final JS that
hydrates the block can also be generated by the compiler.

## Usage

1. Clone this project inside your `wp-content/plugins` directory.

2. `npm start`.

3. `npm run compile` - This will compile the `block.mitosis.js` component to both
   React and a Liquid template and place them in `src/_generated/`

You can see the server rendered output by toggling the request blocking in
your browser's DevTools like:

<img width="498" alt="Screen Shot 2021-12-08 at 13 31 16" src="https://user-images.githubusercontent.com/5417266/145264013-eb764264-889d-45e6-8f5a-d7414a5b5d89.png">


## FAQ

### Could it work with frameworks other than React?

yes!

## Limitations

Compiling to react is currently a bit broken.

Mitosis syntax is meh

## Inspiration

- [Blocky](https://github.com/youknowriad/blocky)
- [Hybrid block demo](https://github.com/nerrad/hybrid-block-demo/)
